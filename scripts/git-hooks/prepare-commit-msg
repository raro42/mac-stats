#!/bin/sh
# prepare-commit-msg: remove Cursor/agent attribution from commit messages.
# Install: cp scripts/git-hooks/prepare-commit-msg .git/hooks/ && chmod +x .git/hooks/prepare-commit-msg
# Or run: ./scripts/install-git-hooks.sh
set -e
msg_file="$1"
[ -f "$msg_file" ] || exit 0
# Strip Co-authored-by lines for Cursor/agent (and any generic Co-authored-by we don't want)
tmp=$(mktemp)
grep -v -E '^Co-authored-by:.*cursoragent@cursor\.com|^Co-authored-by: Cursor ' "$msg_file" > "$tmp" || true
[ -s "$tmp" ] && mv "$tmp" "$msg_file" || rm -f "$tmp"
exit 0
